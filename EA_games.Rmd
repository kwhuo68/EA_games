---
title: "EA Games Report"
author: "WUDAC Project Team"
date: "November 26, 2016"
output: pdf_document
---

# Introduction
Our team wanted to look at determining what factors explain and retain customer profitability for EA's Battlefield game. To do this, we looked at several factors (and constructed our own). They fall into the categories described below.  

## User Play

## ELO Ranking System

## Frequency and User Participation

## Loyalty



# Data Description and Cleaning
We were given 1309 unique user ID's and 732,702 unique game rounds of data to look at. TODO: Fill out. 

```{r, echo=FALSE}
rm(list=ls()) # Remove all the existing variables
setwd("~/Documents/Penn 2016-2017/WUDAC/EA_games") #my directory

users = read.csv("focal_users.csv")
results = read.csv("focal_results.csv")

summary(users)
summary(results)
```

Country, Age, and Gender are all self-reported, so not necessarily accurate. 

```
focal.users$Country_Code <- NULL 
focal.users$User_Age <- NULL 
focal.users$Gender_Code <- NULL 
```

It was stated that the date '2000-01-01' should not be analyzed - this is equivalent to an NA. 

```
focal.users$Signup_Date[which(focal.users$Signup_Date == '2000-01-01')]= NA
focal.users$bf3[which(focal.users$bf3 == '2000-01-01')]= NA
focal.users$bf3prem[which(focal.users$bf3prem == "2000-01-01")]= NA611
focal.users$bf4[which(focal.users$bf4 == "2000-01-01")]= NA
focal.users$bfbc2[which(focal.users$bfbc2 == "2000-01-01")]= NA
```

Something to note - focal results only has 611 unique ids, focal users has 1309 ids. So, any analysis that merges user and results data is only considering 611 out of the 1309 ids. 

```
user.id <- unique(focal.users$User_Account_ID)
user.id.results <- unique(focal.results$user_account_id)
```
# Exploration

## User Play

## ELO Ranking System

## Frequency and User Participation
Goal: define 'intensive' players = determined by product count 
First, in order to analyze the data, convert factors to numerics 
```
focal.users$User_Account_ID <- as.numeric(as.character(focal.users$User_Account_ID))
focal.users$Product_Owned_Cnt <- as.numeric(as.character(focal.users$Product_Owned_Cnt))
focal.users$product_owned_count_at_start <- as.numeric(as.character(focal.users$product_owned_count_at_start))
```
Find the number of products bought over time (start = first GAME played of bf3, end = March 4, 2014) ; Products/Year
```
focal.users$proddiff <- with(focal.users, Product_Owned_Cnt - product_owned_count_at_start)
focal.results$round_start_date <- as.Date(focal.results$round_start_date, format = "%Y-%m-%d")
bf3.start <- setNames(aggregate.data.frame(focal.results$round_start_date, list(focal.results$user_account_id), function(x) min(as.character(x)) ), c("user_account_id", "bf3_start"))
bf3.start$end_date <- rep("2014-03-04", length(bf3.start$bf3_start))
bf3.start$days_start <- as.Date(as.character(bf3.start$end_date)) - as.Date(as.character(bf3.start$bf3_start))
bf3.products <- merge(bf3.start, focal.users, by.x = "user_account_id", by.y = "User_Account_ID", all.x = TRUE)
bf3.products$prod_yr <- (bf3.products$proddiff / as.numeric(bf3.products$days_start)) * 365
```
Round data and look at the distribution 
```
bf3.products$prod_round <- round(bf3.products$prod_yr, digits = 0)
hist(bf3.products$prod_round, breaks = 20, main = "Distribution of Product Rates", xlab = "Product Rates")
```
Split intensive [0, 3] v non-intensive [3, 20] 
Will use this as a comparison instead of cohorts 1 v 2 

Goal: find premium players 
```
focal.users$prem <- ifelse(is.na(focal.users$bf3prem), 0, 1)
```

## Loyalty


# Analysis

## User Play

## ELO Ranking System

## Frequency and User Participation

## Loyalty


# Takeaways 

## User Play

## ELO Ranking System

## Frequency and User Participation

## Loyalty

